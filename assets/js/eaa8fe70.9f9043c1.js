"use strict";(self.webpackChunkstar_docs=self.webpackChunkstar_docs||[]).push([[2668],{9413:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>a});var o=t(4848),i=t(8453);const s={},c=void 0,r={id:"checklists/debugging/backend/dotnet-tools/dotnet-monitor",title:"dotnet-monitor",description:"\u062f\u0633\u062a\u0648\u0631\u0627\u0644\u0639\u0645\u0644\u200c\u0647\u0627\u06cc \u06a9\u0627\u0631 \u0628\u0627 \u0627\u0628\u0632\u0627\u0631 dotnet-monitor \u062f\u0631 \u0645\u062d\u06cc\u0637\u200c\u0647\u0627\u06cc \u0639\u0645\u0644\u06cc\u0627\u062a\u06cc",source:"@site/engineering/02-checklists/debugging/backend/dotnet-tools/dotnet-monitor.md",sourceDirName:"02-checklists/debugging/backend/dotnet-tools",slug:"/checklists/debugging/backend/dotnet-tools/dotnet-monitor",permalink:"/star-docs/engineering/checklists/debugging/backend/dotnet-tools/dotnet-monitor",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"documentsSidebar",previous:{title:"dotnet-dump",permalink:"/star-docs/engineering/checklists/debugging/backend/dotnet-tools/dotnet-dump"},next:{title:"dotnet-trace",permalink:"/star-docs/engineering/checklists/debugging/backend/dotnet-tools/dotnet-trace"}},d={},a=[{value:"\u062f\u0633\u062a\u0648\u0631\u0627\u0644\u0639\u0645\u0644\u200c\u0647\u0627\u06cc \u06a9\u0627\u0631 \u0628\u0627 \u0627\u0628\u0632\u0627\u0631 dotnet-monitor \u062f\u0631 \u0645\u062d\u06cc\u0637\u200c\u0647\u0627\u06cc \u0639\u0645\u0644\u06cc\u0627\u062a\u06cc",id:"\u062f\u0633\u062a\u0648\u0631\u0627\u0644\u0639\u0645\u0644\u0647\u0627\u06cc-\u06a9\u0627\u0631-\u0628\u0627-\u0627\u0628\u0632\u0627\u0631-dotnet-monitor-\u062f\u0631-\u0645\u062d\u06cc\u0637\u0647\u0627\u06cc-\u0639\u0645\u0644\u06cc\u0627\u062a\u06cc",level:2},{value:"\u0627\u062d\u0631\u0627\u0632 \u0647\u0648\u06cc\u062a",id:"\u0627\u062d\u0631\u0627\u0632-\u0647\u0648\u06cc\u062a",level:3},{value:"\u062a\u063a\u06cc\u06cc\u0631\u0627\u062a \u062f\u0631 Docker Compose",id:"\u062a\u063a\u06cc\u06cc\u0631\u0627\u062a-\u062f\u0631-docker-compose",level:3},{value:"\u0627\u0631\u0633\u0627\u0644 \u062f\u0631\u062e\u0648\u0627\u0633\u062a\u200c\u0647\u0627 \u0628\u0627 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 CURL",id:"\u0627\u0631\u0633\u0627\u0644-\u062f\u0631\u062e\u0648\u0627\u0633\u062a\u0647\u0627-\u0628\u0627-\u0627\u0633\u062a\u0641\u0627\u062f\u0647-\u0627\u0632-curl",level:3},{value:"\u062f\u0631\u06cc\u0627\u0641\u062a \u0645\u0634\u062e\u0635\u0627\u062a Api\u0647\u0627\u06cc \u0645\u062e\u062a\u0644\u0641",id:"\u062f\u0631\u06cc\u0627\u0641\u062a-\u0645\u0634\u062e\u0635\u0627\u062a-api\u0647\u0627\u06cc-\u0645\u062e\u062a\u0644\u0641",level:4},{value:"\u062f\u0631\u06cc\u0627\u0641\u062a \u062a\u0645\u0627\u0645 \u067e\u0631\u062f\u0627\u0632\u0634\u200c\u0647\u0627\u06cc \u0645\u062a\u0635\u0644",id:"\u062f\u0631\u06cc\u0627\u0641\u062a-\u062a\u0645\u0627\u0645-\u067e\u0631\u062f\u0627\u0632\u0634\u0647\u0627\u06cc-\u0645\u062a\u0635\u0644",level:4},{value:"\u062f\u0631\u06cc\u0627\u0641\u062a \u062c\u0632\u0626\u06cc\u0627\u062a \u06cc\u06a9 \u067e\u0631\u062f\u0627\u0632\u0634 \u0645\u062a\u0635\u0644",id:"\u062f\u0631\u06cc\u0627\u0641\u062a-\u062c\u0632\u0626\u06cc\u0627\u062a-\u06cc\u06a9-\u067e\u0631\u062f\u0627\u0632\u0634-\u0645\u062a\u0635\u0644",level:4},{value:"\u062f\u0631\u06cc\u0627\u0641\u062a \u062f\u0627\u0645\u067e \u062d\u0627\u0641\u0638\u0647",id:"\u062f\u0631\u06cc\u0627\u0641\u062a-\u062f\u0627\u0645\u067e-\u062d\u0627\u0641\u0638\u0647",level:4},{value:"\u062f\u0631\u06cc\u0627\u0641\u062a \u0641\u0627\u06cc\u0644 Trace",id:"\u062f\u0631\u06cc\u0627\u0641\u062a-\u0641\u0627\u06cc\u0644-trace",level:4}];function l(n){const e={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h2,{id:"\u062f\u0633\u062a\u0648\u0631\u0627\u0644\u0639\u0645\u0644\u0647\u0627\u06cc-\u06a9\u0627\u0631-\u0628\u0627-\u0627\u0628\u0632\u0627\u0631-dotnet-monitor-\u062f\u0631-\u0645\u062d\u06cc\u0637\u0647\u0627\u06cc-\u0639\u0645\u0644\u06cc\u0627\u062a\u06cc",children:"\u062f\u0633\u062a\u0648\u0631\u0627\u0644\u0639\u0645\u0644\u200c\u0647\u0627\u06cc \u06a9\u0627\u0631 \u0628\u0627 \u0627\u0628\u0632\u0627\u0631 dotnet-monitor \u062f\u0631 \u0645\u062d\u06cc\u0637\u200c\u0647\u0627\u06cc \u0639\u0645\u0644\u06cc\u0627\u062a\u06cc"}),"\n",(0,o.jsx)(e.h3,{id:"\u0627\u062d\u0631\u0627\u0632-\u0647\u0648\u06cc\u062a",children:"\u0627\u062d\u0631\u0627\u0632 \u0647\u0648\u06cc\u062a"}),"\n",(0,o.jsx)(e.p,{children:"\u0628\u0631\u0627\u06cc \u0627\u062d\u0631\u0627\u0632 \u0647\u0648\u06cc\u062a \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u0645 \u06a9\u0644\u06cc\u062f\u200c\u0647\u0627 \u0631\u0627 \u0628\u0627 \u0627\u06cc\u0646 \u062f\u0633\u062a\u0648\u0631 \u0627\u06cc\u062c\u0627\u062f \u06a9\u0646\u06cc\u0645:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:'dotnet-monitor generatekey -e "3650.00:00:00"\n'})}),"\n",(0,o.jsxs)(e.p,{children:["\u062f\u0633\u062a\u0648\u0631 \u0628\u0627\u0644\u0627 \u06cc\u06a9 \u062a\u0648\u06a9\u0646 JWT \u0628\u0627 \u06f1\u06f0 \u0633\u0627\u0644 \u0627\u0646\u0642\u0636\u0627 \u0627\u0632 \u062d\u0627\u0644\u0627 \u0627\u06cc\u062c\u0627\u062f \u0645\u06cc\u200c\u06a9\u0646\u062f (",(0,o.jsx)(e.a,{href:"https://github.com/dotnet/dotnet-monitor/blob/99e9fbec72b1babefe926ccfbe8c746b16953077/src/Tools/dotnet-monitor/Strings.resx#L939",children:"\u0645\u0633\u062a\u0646\u062f\u0627\u062a"}),")."]}),"\n",(0,o.jsxs)(e.p,{children:["\u0645\u0633\u062a\u0646\u062f\u0627\u062a \u06a9\u0627\u0645\u0644 \u062f\u0631 ",(0,o.jsx)(e.a,{href:"https://github.com/dotnet/dotnet-monitor/blob/main/documentation/api-key-setup.md",children:"\u0627\u06cc\u0646\u062c\u0627"})," \u0645\u0648\u062c\u0648\u062f \u0627\u0633\u062a."]}),"\n",(0,o.jsx)(e.h3,{id:"\u062a\u063a\u06cc\u06cc\u0631\u0627\u062a-\u062f\u0631-docker-compose",children:"\u062a\u063a\u06cc\u06cc\u0631\u0627\u062a \u062f\u0631 Docker Compose"}),"\n",(0,o.jsx)(e.p,{children:"\u0628\u0631\u0627\u06cc \u0627\u062a\u0635\u0627\u0644 \u06cc\u06a9 \u06a9\u0627\u0646\u062a\u06cc\u0646\u0631 \u062f\u0627\u062a\u200c\u0646\u062a \u0645\u0627\u0646\u06cc\u062a\u0648\u0631 \u0628\u0647 \u062a\u0635\u0627\u0648\u06cc\u0631 \u062e\u0648\u062f\u060c \u0627\u06cc\u0646 \u0633\u0631\u0648\u06cc\u0633 \u0631\u0627 \u0628\u0647 \u0641\u0627\u06cc\u0644 Docker Compose \u062e\u0648\u062f \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:"  dotnet-monitor:\n    image: repo.mohaymen.ir:3060/utilities/dotnet-monitor:8\n    container_name: dotnet_monitor\n    user: 200000:200000\n    environment:\n      - DOTNETMONITOR_Authentication__MonitorApiKey__Subject=fc9cfcfd-dc94-4dd1-8525-43d7d9399f70\n      - DOTNETMONITOR_Authentication__MonitorApiKey__PublicKey=eyJjcnYiOiJQLTM4NCIsImtleV9vcHMiOltdLCJrdHkiOiJFQyIsIm90aCI6W10sIngiOiJsU3AzTnpUMzludkRoS1ktVFpRTy1KTm5ZSUZ6LUEtUnRxVU1tajM2NkZiWG5zLVgyOVN1ZHphMjJIbVBBU2p2IiwieDVjIjpbXSwieSI6IkI3NFhNUVFaalpoVGpXdnFZZHhvOEtTV0hTT3EzUXdKYVk1WWZFS3NxU0dlZTF4WlFadlFBUExPTjZLU1hTVHAifQ\n      - DOTNETMONITOR_Urls=http://+:52323\n      - DOTNETMONITOR_DiagnosticPort__ConnectionMode=Listen\n      - DOTNETMONITOR_Storage__DefaultSharedPath=/diagnostics\n      - DOTNETMONITOR_Storage__DumpTempFolder=/tmp\n    ports:\n      - 52323:52323\n    volumes:\n      - diagnostics:/diagnostics\n      - diagnosticsDump:/tmp\n    restart: no\n    networks:\n      - star_network\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u0648 \u0628\u0631\u0627\u06cc \u062a\u0646\u0647\u0627 \u06cc\u06a9 \u0633\u0631\u0648\u06cc\u0633 \u06a9\u0647 \u0646\u06cc\u0627\u0632 \u0628\u0647 \u0628\u0631\u0631\u0633\u06cc \u062f\u0627\u0631\u062f\u060c \u0627\u06cc\u0646 \u0645\u0642\u0627\u062f\u06cc\u0631 \u0631\u0627 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:"    environment:\n      - DOTNET_DiagnosticPorts=/home/star/dotnet-monitor.sock,suspend\n    volumes:\n      - diagnostics:/home/star/:Z\n      - diagnosticsDump:/tmp\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u0648 \u0647\u0645\u0686\u0646\u06cc\u0646 \u0627\u06cc\u0646 volume \u0631\u0627 \u062f\u0631 \u0627\u0646\u062a\u0647\u0627\u06cc \u0641\u0627\u06cc\u0644 Docker Compose \u062a\u0639\u0631\u06cc\u0641 \u06a9\u0646\u06cc\u062f:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:"volumes:\n  diagnostics: { }\n  diagnosticsDump: { }\n"})}),"\n",(0,o.jsx)(e.h3,{id:"\u0627\u0631\u0633\u0627\u0644-\u062f\u0631\u062e\u0648\u0627\u0633\u062a\u0647\u0627-\u0628\u0627-\u0627\u0633\u062a\u0641\u0627\u062f\u0647-\u0627\u0632-curl",children:"\u0627\u0631\u0633\u0627\u0644 \u062f\u0631\u062e\u0648\u0627\u0633\u062a\u200c\u0647\u0627 \u0628\u0627 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 CURL"}),"\n",(0,o.jsx)(e.p,{children:"\u0628\u0631\u0627\u06cc \u0627\u0631\u0633\u0627\u0644 \u062f\u0631\u062e\u0648\u0627\u0633\u062a\u200c\u0647\u0627 \u0628\u0647 \u062f\u0627\u062a\u200c\u0646\u062a \u0645\u0627\u0646\u06cc\u062a\u0648\u0631\u060c \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0627\u0632 \u062f\u0633\u062a\u0648\u0631\u0627\u062a \u0632\u06cc\u0631 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u0646\u06cc\u062f:"}),"\n",(0,o.jsx)(e.h4,{id:"\u062f\u0631\u06cc\u0627\u0641\u062a-\u0645\u0634\u062e\u0635\u0627\u062a-api\u0647\u0627\u06cc-\u0645\u062e\u062a\u0644\u0641",children:"\u062f\u0631\u06cc\u0627\u0641\u062a \u0645\u0634\u062e\u0635\u0627\u062a Api\u0647\u0627\u06cc \u0645\u062e\u062a\u0644\u0641"}),"\n",(0,o.jsx)(e.p,{children:"\u0628\u0627 \u062f\u0633\u062a\u0648\u0631 \u0632\u06cc\u0631 \u06cc\u06a9 \u062c\u06cc\u0633\u0648\u0646 \u06a9\u0627\u0645\u0644 \u0628\u0647 \u0645\u0646\u0638\u0648\u0631 \u062a\u0648\u0635\u06cc\u0641 \u062a\u0645\u0627\u0645 \u0642\u0627\u0628\u0644\u06cc\u062a\u200c\u0647\u0627\u06cc \u0627\u06cc\u0646 \u0633\u0631\u0648\u06cc\u0633 \u0628\u0647 \u0635\u0648\u0631\u062a\nopenApi3\n\u0641\u0631\u0627\u0647\u0645 \u0645\u06cc\u200c\u0634\u0648\u062f."}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:'curl -X GET --location "http://localhost:52323/" \\\n    -H "Accept: application/json" \\\n    -H "Authorization: Bearer Your-Token"\n'})}),"\n",(0,o.jsx)(e.h4,{id:"\u062f\u0631\u06cc\u0627\u0641\u062a-\u062a\u0645\u0627\u0645-\u067e\u0631\u062f\u0627\u0632\u0634\u0647\u0627\u06cc-\u0645\u062a\u0635\u0644",children:"\u062f\u0631\u06cc\u0627\u0641\u062a \u062a\u0645\u0627\u0645 \u067e\u0631\u062f\u0627\u0632\u0634\u200c\u0647\u0627\u06cc \u0645\u062a\u0635\u0644"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:'curl -X GET --location "http://localhost:52323/processes" \\\n    -H "Accept: application/json" \\\n    -H "Authorization: Bearer Your-Token"\n'})}),"\n",(0,o.jsx)(e.h4,{id:"\u062f\u0631\u06cc\u0627\u0641\u062a-\u062c\u0632\u0626\u06cc\u0627\u062a-\u06cc\u06a9-\u067e\u0631\u062f\u0627\u0632\u0634-\u0645\u062a\u0635\u0644",children:"\u062f\u0631\u06cc\u0627\u0641\u062a \u062c\u0632\u0626\u06cc\u0627\u062a \u06cc\u06a9 \u067e\u0631\u062f\u0627\u0632\u0634 \u0645\u062a\u0635\u0644"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:'curl -X GET --location "http://localhost:52323/env" \\\n    -H "Accept: application/json" \\\n    -H "Authorization: Bearer Your-Token"\n'})}),"\n",(0,o.jsx)(e.h4,{id:"\u062f\u0631\u06cc\u0627\u0641\u062a-\u062f\u0627\u0645\u067e-\u062d\u0627\u0641\u0638\u0647",children:"\u062f\u0631\u06cc\u0627\u0641\u062a \u062f\u0627\u0645\u067e \u062d\u0627\u0641\u0638\u0647"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:'curl -X GET --location "http://localhost:52323/dump?type=Full" \\\n    -H "Accept: application/json" \\\n    -H "Authorization: Bearer Your-Token" \n'})}),"\n",(0,o.jsx)(e.h4,{id:"\u062f\u0631\u06cc\u0627\u0641\u062a-\u0641\u0627\u06cc\u0644-trace",children:"\u062f\u0631\u06cc\u0627\u0641\u062a \u0641\u0627\u06cc\u0644 Trace"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:'curl -X GET --location "http://localhost:52323/trace?durationSeconds=15" \\\n    -H "Accept: application/json" \\\n    -H "Authorization: Bearer Your-Token"\n'})}),"\n",(0,o.jsx)(e.admonition,{type:"tip",children:(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"\u0634\u0646\u0627\u0633\u0647 \u0641\u0631\u0622\u06cc\u0646\u062f (PID)"}),"\n\u062f\u0631 \u0635\u0648\u0631\u062a\u06cc \u06a9\u0647 \u0641\u0642\u0637 \u06cc\u06a9 \u067e\u0631\u062f\u0627\u0632\u0634 \u062e\u0627\u0635 \u0628\u0647\n",(0,o.jsx)(e.code,{children:"dotnet-monitor"}),"\n\u0645\u062a\u0635\u0644 \u0634\u062f\u0647 \u0628\u0627\u0634\u062f \u0646\u06cc\u0627\u0632\u06cc \u0628\u0647 \u0627\u0636\u0627\u0641\u0647\u200c\u06a9\u0631\u062f\u0646 \u0641\u06cc\u0644\u062a\u0631\u0647\u0627\u06cc\u06cc \u0631\u0648\u06cc \u067e\u0631\u062f\u0627\u0632\u0634\u200c\u0647\u0627 \u0646\u06cc\u0627\u0632 \u0646\u06cc\u0633\u062a \u0648 \u0628\u0647 \u0635\u0648\u0631\u062a \u062e\u0648\u062f\u06a9\u0627\u0631 \u0631\u0648\u06cc \u0647\u0645\u0627\u0646 \u067e\u0631\u062f\u0627\u0632\u0634 \u062e\u0627\u0635\n\u0639\u0645\u0644\u06cc\u0627\u062a \u0627\u0646\u062c\u0627\u0645 \u0645\u06cc\u200c\u0634\u0648\u062f."]})})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(l,{...n})}):l(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>c,x:()=>r});var o=t(6540);const i={},s=o.createContext(i);function c(n){const e=o.useContext(s);return o.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:c(n.components),o.createElement(s.Provider,{value:e},n.children)}}}]);